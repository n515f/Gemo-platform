/* تخطيط الموقع العام */
body.app{ background:var(--bg); color:var(--fg); }
.center-nav{ flex:1; display:flex; justify-content:center; }
/* ==== سلوك ترتيب عناصر الهيدر بحسب الاتجاه ==== */
.topbar .shell{
  display:flex; align-items:center; justify-content:space-between; gap:18px;
  width:min(1200px,96%); margin-inline:auto; padding:14px;
  border:1px solid var(--border); border-radius:22px;
  background:color-mix(in srgb, var(--bg) 92%, transparent);
  box-shadow:var(--shadow);
  flex-wrap: wrap; /* يسمح باللف على الشاشات الصغيرة */
}

/* النظام العام: nav في الوسط دائمًا */
.center-nav{ flex:1; display:flex; justify-content:center; }

/* ترتيب مرن حسب LTR/RTL */
html[dir="rtl"] .right-logo{ order: 0; }
html[dir="rtl"] .center-nav{ order: 1; }
html[dir="rtl"] .brand-left{ order: 2; }

html[dir="ltr"] .right-logo{ order: 0; }
html[dir="ltr"] .center-nav{ order: 1; }
html[dir="ltr"] .brand-left{ order: 2; }

/* إصلاح هبوط بطاقة المستخدم */
.brand-left{
  display:flex; align-items:center; gap:12px;
  min-width: 230px; /* يمنع الانضغاط المبالغ فيه */
}

/* الشعار لا يختفي في LTR */
.right-logo .brand-logo-link { display:inline-flex; align-items:center; }
.right-logo .logo-big{
  width:56px; height:56px; object-fit:contain; border:none; box-shadow:none; background:transparent;
}

/* شريط التنقّل الجديد */
.topnav{
  flex: 1 1 auto;
  display:flex; align-items:center; justify-content:space-between;
  gap: 10px;
}
.mainnav{
  display:flex; align-items:center; gap:8px; padding:4px; border-radius:16px;
  background:color-mix(in srgb, var(--fg) 6%, transparent); border:1px solid var(--border);
  overflow:auto;  /* على الموبايل يسمح بالتمرير الأفقي */
}
.mainnav .pill{
  text-decoration:none; font-weight:900; white-space:nowrap; color:var(--muted);
  padding:10px 16px; border-radius:14px; display:inline-flex; align-items:center;
  transition: color var(--dur-fast) var(--easing), background var(--dur-fast) var(--easing), transform var(--dur-fast) var(--easing);
}
.mainnav .pill:hover{ color:var(--primary); transform:translateY(-1px); }
.mainnav .pill.active{
  background:color-mix(in srgb, var(--fg) 6%, transparent); color:var(--text);
  box-shadow:inset 0 0 0 1px var(--border);
}
.dark .mainnav{ background:rgba(255,255,255,.04); }
.dark .mainnav .pill.active{ background:rgba(255,255,255,.06); }

/* مجموعة الأزرار يمين/يسار (تسجيل خروج أو ابدأ الآن) */
.authnav{ display:flex; align-items:center; gap:8px; }
.pill.danger{ color:#b91c1c; }
.pill.cta{
  background: var(--grad-brand);
  color:#0b1220; font-weight:900;
  padding:10px 16px; border-radius:14px; text-decoration:none;
  box-shadow: 0 10px 20px rgba(2,6,23,.10);
}
.pill.cta:hover{ filter:brightness(1.05); transform:translateY(-1px); }


.footer{ margin-top:60px; padding:24px 16px; border-top:1px solid var(--ring);
  display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap; color:var(--muted); }
.footer .socials{ display:flex; gap:1rem; }
.footer .socials a{ color:var(--muted); text-decoration:none; font-weight:900; }
.footer .socials a:hover{ color:var(--brand); }
.footer .copy{ font-size:13px; }
.footer.footer-triple{ display:flex; align-items:center; gap:12px; justify-content:space-between; }
.footer .left-controls{ display:flex; align-items:center; gap:12px; }
.footer .left-controls .lang{ color:var(--muted); text-decoration:none; font-weight:900; }
.footer .left-controls .lang:hover{ color:var(--primary); }
.footer .copy.center{ text-align:center; margin-inline:auto; }
.footer .socials.right{ display:flex; align-items:center; gap:12px; }
.footer .socials .social img{ width:22px; height:22px; display:block; }

/* تحسنيات شاشة صغيرة */
@media (max-width: 860px){
  .brand-left{ min-width:180px; }
  .mainnav{ max-width: 100%; }
}

@media (max-width: 640px){
  .topbar .shell{ padding:10px; border-radius:16px; }
  .brand-left .title{ font-size: 16px; }
  .manager-img{ width:40px; height:40px; border-radius:10px; }
}

/* يمنع التفاف عناصر الهيدر */
.topbar .shell.no-wrap{
  display:flex; align-items:center; justify-content:space-between; gap:18px;
  width:min(1200px,96%); margin-inline:auto; padding:12px 14px;
  border:1px solid var(--border); border-radius:22px;
  background:color-mix(in srgb, var(--bg) 92%, transparent);
  box-shadow:var(--shadow);
  flex-wrap:nowrap; /* مهم: لا يلف */
}

.right-logo .brand-logo-link{ display:inline-flex; align-items:center; }
.right-logo .logo-big{ width:56px; height:56px; object-fit:contain; border:none; background:transparent; }

.topnav{ display:flex; align-items:center; gap:10px; flex:1; justify-content:center; }
.desktop-nav{ display:flex; align-items:center; gap:8px; padding:4px; border-radius:16px;
  background:color-mix(in srgb, var(--fg) 6%, transparent); border:1px solid var(--border);
}
.desktop-nav .pill{ text-decoration:none; font-weight:900; white-space:nowrap; color:var(--muted);
  padding:10px 16px; border-radius:14px; display:inline-flex; align-items:center;
}
.desktop-nav .pill:hover{ color:var(--primary); transform:translateY(-1px); }
.desktop-nav .pill.active{ background:color-mix(in srgb, var(--fg) 6%, transparent); color:var(--text); box-shadow:inset 0 0 0 1px var(--border); }

.user-actions{ display:flex; align-items:center; gap:10px; }

/* بطاقة المستخدم للديسكتوب فقط */
.only-desktop{ display:flex; align-items:center; gap:12px; min-width:230px; }
.manager-img{ width:44px; height:44px; border-radius:12px; object-fit:cover; }
.brand-text .title{ display:block; color:var(--text); font-weight:900; font-size:20px; line-height:1; letter-spacing:.2px; }
.brand-text small{ display:block; color:var(--muted); margin-top:4px; }

/* همبرغر */
.hamburger{ display:none; flex-direction:column; justify-content:center; gap:4px;
  width:38px; height:38px; padding:6px; border:1px solid var(--ring); border-radius:10px; background:var(--card); cursor:pointer;
}
.hamburger > span{ height:2px; border-radius:2px; background:var(--fg); display:block; }

/* قائمة الموبايل */
.mobile-menu{ position:absolute; inset-inline:10px; top:calc(100% + 8px); background:var(--card);
  border:1px solid var(--ring); border-radius:14px; box-shadow:var(--shadow-lg); padding:8px;
  display:none; flex-direction:column; gap:4px; z-index:60;
}
.mobile-menu .item{ display:block; padding:.7rem .9rem; border-radius:10px; font-weight:800; color:var(--fg); text-decoration:none; border:1px solid transparent; }
.mobile-menu .item:hover{ background:color-mix(in srgb, var(--fg) 5%, transparent); }
.mobile-menu .item.start{ background:var(--grad-brand); color:#0b1220; text-align:center; }
.mobile-menu .item.danger{ background:#fee2e2; color:#991b1b; font-weight:900; text-align:center; }

/* زر خروج كأيقونة */
.logout-icon{ width:38px; height:38px; display:inline-grid; place-items:center;
}
.logout-icon img{ width:18px; height:18px; display:block; }
.logout-icon:hover{ transform:translateY(-1px); box-shadow:0 8px 18px rgba(239,68,68,.18); }

/* زر "ابدأ الآن" */
.btn-start{ background:var(--grad-brand); color:#0b1220; font-weight:900; border:1px solid transparent; padding:10px 16px; border-radius:14px; }

/* أيقونة الثيم */
.theme-btn{ display:inline-flex; align-items:center; justify-content:center; width:38px; height:38px; border:1px solid var(--ring);
  background:var(--card); border-radius:10px; }
.theme-btn img{ width:18px; height:18px; display:block; }

/* ترتيب RTL/LTR للأعمدة */
html[dir="rtl"] .right-logo{ order:0; }
html[dir="rtl"] .topnav{ order:1; }
html[dir="rtl"] .user-actions{ order:2; }

html[dir="ltr"] .right-logo{ order:0; }
html[dir="ltr"] .topnav{ order:1; }
html[dir="ltr"] .user-actions{ order:2; }

/* استجابة: عند الشاشات الصغيرة نخفي الروابط وبطاقة المستخدم */
@media (max-width: 992px){
  .desktop-nav{ display:none; }
  .hamburger{ display:inline-flex; }
  .only-desktop{ display:none; }
  .topbar .shell.no-wrap{ gap:10px; }
}

/* إظهار قائمة الموبايل عند فتحها (Alpine يضيف x-show) */
.md-hide[x-cloak]{ display:none !important; }

.brand-text small{
  display:block;
  color:var(--muted);
  margin-top:4px;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  max-width: 180px; /* يضمن عدم خروج البريد */
}
@media (max-width: 1200px){
  .brand-text small{ max-width: 140px; }
}

/* ... (كل ما لديك سابقًا يبقى كما هو) ... */

/* ====== تحسين بطاقة المستخدم بالديسكتوب ====== */
.only-desktop{ display:flex; align-items:center; gap:12px; min-width:230px; }
.manager-img{ width:44px; height:44px; border-radius:12px; object-fit:cover; }
.brand-text .title{ display:block; color:var(--text); font-weight:900; font-size:20px; line-height:1; letter-spacing:.2px; }
.brand-text small{ display:block; color:var(--muted); margin-top:4px; }
.brand-text .email{ direction:ltr; unicode-bidi:embed; }

/* ====== Helpers للظهور/الإخفاء حسب المقاس (مهم لزر ابدأ الآن) ====== */
.only-desktop{ display:inline-flex; }
@media (max-width: 991px){
  .only-desktop{ display:none !important; }
}
/* تحريك الهمبرغر إلى X عندما يكون مفتوح */
.hamburger{ position:relative; overflow:hidden; }
.hamburger > span{
  height:2px; border-radius:2px; background:var(--fg); display:block;
  transition:transform .18s var(--easing), opacity .18s var(--easing);
}
.hamburger.open > span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
.hamburger.open > span:nth-child(2){ opacity:0; }
.hamburger.open > span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }

/* لا تغييرات على بقية تنسيقاتك هنا */
[x-cloak]{ display:none !important; }

.md-hide{ display:inline-flex; }      /* افتراضيًا مرئي */
.desktop-nav{ display:flex; }

@media (min-width: 992px){
  .md-hide{ display:none !important; }     /* تختفي عناصر الموبايل فوق 992px */
}
@media (max-width: 991.98px){
  .desktop-nav{ display:none !important; } /* تختفي روابط الديسكتوب تحت 992px */
  .hamburger{ display:inline-flex !important; }
}

.topnav{ position:relative; }
.mobile-menu{
  position:absolute; inset-inline:10px; top:calc(100% + 8px);
  background:var(--card); border:1px solid var(--ring);
  border-radius:14px; box-shadow:var(--shadow-lg);
  padding:8px; display:flex; flex-direction:column; gap:4px; z-index:60;
}
/* ===== خدماتنا: شبكة + دخول متناوب يمين/يسار ===== */
.services-grid{
  display:grid; gap:12px;
  grid-template-columns: repeat(5, 1fr);
}
@media (max-width:1200px){ .services-grid{ grid-template-columns: repeat(3,1fr); } }
@media (max-width:720px){  .services-grid{ grid-template-columns: 1fr; } }

.svc-card{
  display:flex; flex-direction:column; align-items:center; text-align:center;
  text-decoration:none; color:var(--fg); background:var(--card);
  border:1px solid var(--ring); border-radius:16px; padding:16px;
  box-shadow: 0 14px 22px -14px color-mix(in srgb, var(--brand) 38%, transparent);
  transition: transform .35s ease, box-shadow .35s ease, opacity .5s ease;
  /* حالة قبل الظهور (ستُزال عبر .in من الـJS) */
  opacity:0; transform: translateY(12px) translateX(var(--slideX,0));
}
.svc-card .ico{ width:64px; height:64px; object-fit:cover; border-radius:14px;
  background:var(--soft); border:1px solid var(--ring); margin-bottom:8px; }
.svc-card h3{ margin:.25rem 0 .25rem; font-weight:900; }
.svc-card p{ color:var(--muted); margin:0; }

/* دخول عند إضافة .in */
.svc-card.in{ opacity:1; transform:none; }

/* اتجاه متناوب: فردية من اليمين، زوجية من اليسار */
.services-grid .svc-card:nth-child(odd){  --slideX: 56px; }
.services-grid .svc-card:nth-child(even){ --slideX: -56px; }

/* نبض وارتفاع بسيط عند التحويم */
@keyframes svcPulse {
  0%{ box-shadow:0 0 0 0 color-mix(in srgb,var(--brand) 25%, transparent); }
  70%{ box-shadow:0 0 0 18px transparent; }
  100%{ box-shadow:0 0 0 0 transparent; }
}
.svc-card:hover{
  transform: translateY(-3px) scale(1.02);
  animation: svcPulse .9s ease;
}

/* نظام الـreveal العام لديك يجب أن يضيف .in على العناصر داخل viewport */
/* ====== Ads Rotator ====== */
.ads-rotator{
  position:relative;
  overflow:hidden;
  border-radius:16px;
}

.ads-rotator .ad{
  position:absolute;
  inset:0;
  opacity:0;
  transform:translateX(16%);
  transition:
    opacity .45s ease,
    transform .55s cubic-bezier(.22,.61,.36,1); /* دخول ناعم */
  display:grid;
}

.ads-rotator .ad.active{
  opacity:1;
  transform:translateX(0);
  z-index:2;
}

.ads-rotator .ad.out-left{
  opacity:0;
  transform:translateX(-18%);
  z-index:1;
}

.ad-visual img{
  display:block;
  width:100%;
  height:auto;
  transition: opacity .35s ease;
}

/* (اختياري) طبقة نص فوق الصورة */
.ad-overlay{
  position:absolute; inset:auto 0 0 0;
  padding:14px;
  background:linear-gradient(0deg, rgba(0,0,0,.5), rgba(0,0,0,0));
  color:#fff;
}
/* ====== Ads Rotator ====== */
.ads-rotator{
  position:relative;
  overflow:hidden;
  border-radius:16px;
}
.ads-rotator { min-height: 360px; }                /* اضبط الارتفاع الذي تريده */

/* كل إعلان */
.ads-rotator .ad{
  position:absolute;
  inset:0;
  opacity:0;
  transform:translateX(16%);
  transition:
    opacity .45s ease,
    transform .55s cubic-bezier(.22,.61,.36,1);
  display:block;
}

.ads-rotator .ad.active{
  opacity:1;
  transform:translateX(0);
  z-index:2;
}

.ads-rotator .ad.out-left{
  opacity:0;
  transform:translateX(-18%);
  z-index:1;
}

/* الصورة تملأ السيكشن */
.ad-visual{
  position:absolute;
  inset: 0;
  width:100%;
  height:100%;
  overflow:hidden;
}
.ad-visual img{
  width:100%;
  height:100%;
  object-fit:cover; /* تملأ مع الحفاظ على التناسب */
  transition: transform .6s ease;
}

/* تكبير الصورة عند الهوفر */
.ads-rotator .ad:hover .ad-visual img{
  transform:scale(1.08);
}

/* النص يبقى ثابت أسفل */
.ad-overlay{
  position:absolute;
  inset:auto 0 0 0;
  padding:16px;
  background:linear-gradient(0deg, rgba(0,0,0,.55), rgba(0,0,0,0));
  color:#fff;
  z-index:3;
}
.ad-overlay h3.ad-title{
  margin:0;
  font-size:1.25rem;
  font-weight:900;
}
.ad-overlay p.ad-desc{
  margin:.25rem 0 0;
  font-size:.95rem;
  font-weight:600;
}

/* ====== Indicators (dots) ====== */
.ads-dots{
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:8px;
  z-index:4;
}
.ads-dots button{
  width:10px; height:10px;
  border-radius:50%;
  background:rgba(255,255,255,.6);
  border:none;
  cursor:pointer;
  transition:all .3s ease;
}
.ads-dots button.active{
  background:#fff;
  width:12px; height:12px;
}
.ads-rotator { position: relative; overflow: hidden; border-radius: 16px; }
.ads-rotator .ad { position: absolute; inset: 0; }
.ad-visual { position: absolute; inset: 0; }       /* تجعل الصورة تملأ الإطار */
.ads-rotator { min-height: 360px; }                /* اضبط الارتفاع الذي تريده */

/* Alpine/JS: إخفاء مؤقت قبل التهيئة */
[x-cloak]{ display:none !important; }

/* زر الهومبرغر عند الفتح (اختياري لتغيير الشكل) */
.hamburger.open span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
.hamburger.open span:nth-child(2){ opacity:0; }
.hamburger.open span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }

/* إظهار/إخفاء قائمة الموبايل عبر hidden */
.mobile-menu[hidden]{ display:none; }

/* md-hide: تُعرض على الشاشات الصغيرة فقط */
.md-hide{ display:none; }
@media (max-width: 900px){
  .md-hide{ display:block; }
}

/* -------- Avatar bottom sheet styles (منقولة من الـ inline السابق) -------- */
.avatar-wrap{ position:relative; display:flex; align-items:center; gap:10px; }
.avatar-btn{ position:relative; border:none; background:transparent; padding:0; cursor:pointer; }
.avatar-btn img.manager-img{ width:42px; height:42px; border-radius:12px; object-fit:cover; display:block; }
.avatar-btn .edit-badge{
  position:absolute; inset:auto -6px -6px auto; width:22px; height:22px; border-radius:50%;
  background:var(--brand,#38bdf8); display:grid; place-items:center; box-shadow:0 4px 10px rgba(0,0,0,.2);
}
.avatar-btn .edit-badge svg{ width:13px; height:13px; color:#0b1220; }

/* Sheet */
.sheet-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:60; opacity:0; pointer-events:none;
  transition:opacity .2s ease;
}
.sheet{ position:fixed; left:0; right:0; bottom:-340px; z-index:61;
  background:var(--card,#fff); border-radius:16px 16px 0 0; border:1px solid var(--ring,#e2e8f0);
  padding:12px; box-shadow:0 -20px 40px rgba(0,0,0,.25);
  transition:bottom .25s cubic-bezier(.22,.61,.36,1);
}
.sheet.open{ bottom:0; }
.sheet-backdrop.open{ opacity:1; pointer-events:auto; }
.sheet .bar{ width:42px; height:4px; border-radius:999px; background:var(--ring,#e2e8f0); margin:4px auto 10px; }
.sheet .item{
  display:flex; align-items:center; gap:10px; width:100%; padding:12px 10px;
  border-radius:12px; border:1px solid var(--ring,#e2e8f0); background:var(--soft,#f8fafc);
  font-weight:800; cursor:pointer; text-align:start;
}
.sheet .item + .item{ margin-top:8px; }
.sheet .item.danger{ background:#fee2e2; color:#991b1b; border-color:#fecaca; }
.sheet .item svg{ width:18px; height:18px; }